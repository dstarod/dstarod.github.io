<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Круг интересов</title><link>https://dstarod.github.io/</link><description>Recent content on Круг интересов</description><generator>Hugo</generator><language>ru-RU</language><lastBuildDate>Thu, 15 Aug 2019 00:00:00 +0300</lastBuildDate><atom:link href="https://dstarod.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>Использование цикла в PostgreSQL с выводом в консоль</title><link>https://dstarod.github.io/postgres-do-loop-notice/</link><pubDate>Thu, 15 Aug 2019 00:00:00 +0300</pubDate><guid>https://dstarod.github.io/postgres-do-loop-notice/</guid><description>&lt;p>Небольшая заметка на полях на будущее. Иногда в PostgreSQL нужно выполнить ряд повторяющихся действий с выводом результатов в лог.
Одним примером покажу, как это сделать легко и просто.&lt;/p>
&lt;p>&lt;img src="4b18992411f842c4da36c9309667eac0.jpg" alt="">&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">-- Делаем вывод сообщений в лог видимым
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">&lt;/span>&lt;span style="color:#859900">SET&lt;/span> &lt;span style="color:#268bd2">client_min_messages&lt;/span> &lt;span style="color:#859900">TO&lt;/span> &lt;span style="color:#268bd2">notice&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900">CREATE&lt;/span> &lt;span style="color:#268bd2">TEMP&lt;/span> &lt;span style="color:#859900">TABLE&lt;/span> &lt;span style="color:#268bd2">tmp&lt;/span>(&lt;span style="color:#268bd2">id&lt;/span> &lt;span style="color:#cb4b16">SERIAL&lt;/span>, &lt;span style="color:#268bd2">name&lt;/span> &lt;span style="color:#cb4b16">TEXT&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">-- Анонимный блок DO
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">&lt;/span>&lt;span style="color:#859900">DO&lt;/span> $$
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900">BEGIN&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#93a1a1;font-style:italic">-- Цикл LOOP
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">&lt;/span> &lt;span style="color:#268bd2">LOOP&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#859900">INSERT&lt;/span> &lt;span style="color:#859900">INTO&lt;/span> &lt;span style="color:#268bd2">tmp&lt;/span>(&lt;span style="color:#268bd2">name&lt;/span>) &lt;span style="color:#859900">VALUES&lt;/span>(&lt;span style="color:#268bd2">gen_random_uuid&lt;/span>()::&lt;span style="color:#cb4b16">TEXT&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#93a1a1;font-style:italic">-- Условный оператор IF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">&lt;/span> &lt;span style="color:#859900">IF&lt;/span> (&lt;span style="color:#859900">SELECT&lt;/span> &lt;span style="color:#859900">MAX&lt;/span>(&lt;span style="color:#268bd2">id&lt;/span>) &lt;span style="color:#859900">FROM&lt;/span> &lt;span style="color:#268bd2">tmp&lt;/span>) &amp;gt; &lt;span style="color:#2aa198;font-weight:bold">100&lt;/span> &lt;span style="color:#859900">THEN&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">RAISE&lt;/span> &lt;span style="color:#268bd2">NOTICE&lt;/span> &lt;span style="color:#2aa198">&amp;#39;max id == %&amp;#39;&lt;/span>, (&lt;span style="color:#859900">SELECT&lt;/span> &lt;span style="color:#859900">COUNT&lt;/span>(*) &lt;span style="color:#859900">FROM&lt;/span> &lt;span style="color:#268bd2">tmp&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">EXIT&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#859900">END&lt;/span> &lt;span style="color:#859900">IF&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#859900">END&lt;/span> &lt;span style="color:#268bd2">LOOP&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900">END&lt;/span> $$;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Intellij IDEA - сброс триального периода</title><link>https://dstarod.github.io/idea-trial/</link><pubDate>Fri, 21 Jun 2019 00:00:00 +0300</pubDate><guid>https://dstarod.github.io/idea-trial/</guid><description>&lt;p>Аж в 2016 году я тут писал о том, &lt;a href="https://dstarod.github.io/remove-idea-completely/">как удалить Idea полностью&lt;/a>, чтобы начать все с начала.
Но времена меняются, и что работало раньше - не работает сейчас. Вот обновленный алгоритм для MacOS. Обратите внимание на версию Idea.&lt;/p>
&lt;p>Удаляем файлы и каталоги:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#cb4b16">cd&lt;/span> ~/Library/Preferences
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ls | grep &lt;span style="color:#2aa198">&amp;#39;jetbrains&amp;#39;&lt;/span> | xargs rm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rm IntelliJIdea2019.1/eval/*.key
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rm IntelliJIdea2019.1/options/other.xml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Теперь надо удалить записи из одного файла plist, который хранится в закодированном виде. Придется его для начала сконвертировать в текст а потом обратно:&lt;/p></description></item><item><title>Создание валидной цепочки SSL сертификатов</title><link>https://dstarod.github.io/fake-ssl-cert-chain/</link><pubDate>Thu, 17 Aug 2017 00:00:00 +0300</pubDate><guid>https://dstarod.github.io/fake-ssl-cert-chain/</guid><description>&lt;p>Для написания тестов на валидность загружаемых сертификатов мне потребовалось создать несколько вариантов
цепочек и приватных ключей. Прошерстив некоторый объем интернета, я собрал всю необходимую информацию о том,
как локально сгенерировать корректную цепочку SSL сертификатов, которая будет проходить проверку стандартными
средствами.&lt;/p>
&lt;p>Чтобы не писать кучу команд всякий раз, напишем bash-скрипт. Для начала, зададим несколько настроечных констант:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">CSR_FILE&lt;/span>=&lt;span style="color:#2aa198">&amp;#34;csrfile.csr&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">KEY_BITS&lt;/span>=&lt;span style="color:#2aa198;font-weight:bold">2048&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">CONF_DIR&lt;/span>=&lt;span style="color:#2aa198">&amp;#34;conf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">CHAIN_CRT&lt;/span>=&lt;span style="color:#2aa198">&amp;#34;ca_chain.crt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Затем пара функций для подготовки и последующей подчистки каталога с настройками:&lt;/p></description></item><item><title>Удобные команды и алиасы для GIT</title><link>https://dstarod.github.io/git-tricks-and-aliases-with-fish/</link><pubDate>Thu, 27 Jul 2017 00:00:00 +0300</pubDate><guid>https://dstarod.github.io/git-tricks-and-aliases-with-fish/</guid><description>&lt;p>Несколько удобных алиасов для git, чтобы не потерять, положу это здесь.
Я использую оболочку &lt;a href="https://fishshell.com/">fish&lt;/a>, поэтому возможно какие-то команды потребуется адаптировать для вашей.
Шикарный набор советов &lt;a href="https://github.com/git-tips/tips">здесь&lt;/a>.&lt;/p>
&lt;p>Лог в виде дерева:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900">function&lt;/span> gl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git log --oneline --decorate --graph --all
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>end
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Интерактивный rebase с указанного в аргументах коммита:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900">function&lt;/span> gri
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git rebase -i &lt;span style="color:#268bd2">$argv&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>end
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Перезапись локальной ветки свежей веткой с origin:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900">function&lt;/span> grho
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git fetch origin (gb)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git reset --hard FETCH_HEAD
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>end
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Имя текущей ветки:&lt;/p></description></item><item><title>Плагин для Sublime Text своими руками</title><link>https://dstarod.github.io/sublime-plugin-dict-to-json/</link><pubDate>Thu, 13 Apr 2017 00:00:00 +0300</pubDate><guid>https://dstarod.github.io/sublime-plugin-dict-to-json/</guid><description>&lt;p>Не секрет, что одним из самых популярных редакторов кода у разработчиков на сегодняшний день
является &lt;a href="https://www.sublimetext.com/">Sublime Text&lt;/a>. Кроме своих индивидуальных киллер-фич,
которые вскоре стали копировать разработчики других продуктов той-же ниши
(например, мультиредактирование), он хорош своей расширяемостью плагинами, коих великое множество на любой вкус. Думаю, не последней причиной такого их количества является простота создания. Для примера возьмем и напишем полезный инструмент, который будет брать как попало отформатированный Python-словарь и выдавать JSON стройными рядами.&lt;/p></description></item><item><title>Как остановить зависшую транзакцию в PostgreSQL</title><link>https://dstarod.github.io/terminate-transaction-lock-postgres/</link><pubDate>Mon, 09 Jan 2017 00:00:00 +0300</pubDate><guid>https://dstarod.github.io/terminate-transaction-lock-postgres/</guid><description>&lt;p>Сегодня PostgreSQL является одной из самых популярных СУБД, и, судя по новостям, многие крупные конторы переходят на ее использование
с коммерческих продуктов признанных лидеров софтверного фронта. Поэтому думаю, что пошаговое решение ситуации с остановкой зависшей
транзакции будет полезно многим. Я столкнулся с таковой, применяя транзакцию, создающую внешний ключ к заблокированной таблице.&lt;/p>
&lt;p>Итак, что нам нужно сделать:&lt;/p>
&lt;ol>
&lt;li>Найти ID заблокированной таблицы;&lt;/li>
&lt;li>Найти ID транзакции, которая зависла;&lt;/li>
&lt;li>Попытаться остановить её корректно, прервать в случае оказания сопротивления.&lt;/li>
&lt;/ol>
&lt;p>Допустим, запрос заблокировал таблицу &amp;ldquo;mytable&amp;rdquo;. Получим её ID:&lt;/p></description></item><item><title>Полное удаление Intellij IDEA или Вечный Триал</title><link>https://dstarod.github.io/remove-idea-completely/</link><pubDate>Wed, 21 Sep 2016 00:00:00 +0300</pubDate><guid>https://dstarod.github.io/remove-idea-completely/</guid><description>&lt;p>Одна из самых шикарных IDE для full-stack разработки - Intellij IDEA. Community версия бесплатна, и для разработки на Java/Android ее хватит за глаза.
А если приходится писать на Python, PL/SQL, Groovy, JavaScript, и еще горсточке языков? Тут только Professional вариант, вот только он стоит денег, хоть он того и стоит.
Конечно, для начала вам предлагается пробный период на месяц, в течении которого можно успеть по достоинству оценить эту IDE.
Но что, если пробный период закончился, а денег на приобретение все еще нет?&lt;/p></description></item><item><title>Python и пляски с процессами</title><link>https://dstarod.github.io/python-grandchilds/</link><pubDate>Thu, 01 Sep 2016 00:00:00 +0300</pubDate><guid>https://dstarod.github.io/python-grandchilds/</guid><description>&lt;p>Про использование нескольких процессов в Python уже написано невообразимое множество статей, хороших и не очень;
сломано немало копий в обсуждении проблемы GIL и псевдопотоков. Я же просто хочу рассказать о том, как решалась
задача с управлением небольшого дерева дочерних процессов.&lt;/p>
&lt;p>Итак, исходная ситуация. Основной процесс запускает два дочерних, используя &lt;code>multiprocessing.Process&lt;/code>, передает туда
очередь &lt;code>multiprocessing.Queue&lt;/code>. Первый дочерний процесс просто собирает какие-то данные и пишет в очередь,
второй же запускает еще несколько процессов, куда передает ту-же очередь, с которой они и работают.&lt;/p></description></item><item><title>Python NLTK + Stanford NLP</title><link>https://dstarod.github.io/python-nltk-stanford-nlp/</link><pubDate>Fri, 29 Jan 2016 00:00:00 +0300</pubDate><guid>https://dstarod.github.io/python-nltk-stanford-nlp/</guid><description>&lt;p>Как известно, в Python стандартом работы с натуральным языком де-факто является NLTK. Несмотря на это, я довольно долго использовал Pattern от CLiPS из-за его простоты и скорости (многие отмечают тормознутость NLTK).&lt;/p>
&lt;p>Но наступил момент, когда почти вся кодовая база была успешно портирована на Python 3.5, а разработчики Pattern так и не сделали версию с поддержкой третьей версии. И, судя по всему, не собираются.&lt;/p>
&lt;p>Что-ж, будем использовать NLTK. От него мне нужны: токенизация, выделение POS (part-of-speech), получение N-grams и классификация твитов на группы с использованием Naive Bayes. Все это дело на Python 3.5.&lt;/p></description></item><item><title>Postgres: generate the most large followers intersections</title><link>https://dstarod.github.io/postgres-generate-most-large-followers/</link><pubDate>Tue, 19 Jan 2016 00:00:00 +0300</pubDate><guid>https://dstarod.github.io/postgres-generate-most-large-followers/</guid><description>&lt;p>Задача: получить список пользователей твиттера, с которыми у одного из них есть общие фоловеры, и отсортировать по их количеству. Лучше всего продемонстрировать на примере. Создадим таблицу с идентификаторами пользователей и фоловеров:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900">CREATE&lt;/span> &lt;span style="color:#268bd2">TEMP&lt;/span> &lt;span style="color:#859900">TABLE&lt;/span> &lt;span style="color:#268bd2">f&lt;/span>(&lt;span style="color:#268bd2">uid&lt;/span> &lt;span style="color:#cb4b16">INT&lt;/span>, &lt;span style="color:#268bd2">fid&lt;/span> &lt;span style="color:#cb4b16">INT&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900">INSERT&lt;/span> &lt;span style="color:#859900">INTO&lt;/span> &lt;span style="color:#268bd2">f&lt;/span>(&lt;span style="color:#268bd2">uid&lt;/span>, &lt;span style="color:#268bd2">fid&lt;/span>) &lt;span style="color:#859900">VALUES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#2aa198;font-weight:bold">1&lt;/span>, &lt;span style="color:#2aa198;font-weight:bold">10&lt;/span>), (&lt;span style="color:#2aa198;font-weight:bold">1&lt;/span>, &lt;span style="color:#2aa198;font-weight:bold">11&lt;/span>), (&lt;span style="color:#2aa198;font-weight:bold">1&lt;/span>, &lt;span style="color:#2aa198;font-weight:bold">12&lt;/span>), (&lt;span style="color:#2aa198;font-weight:bold">1&lt;/span>, &lt;span style="color:#2aa198;font-weight:bold">13&lt;/span>), (&lt;span style="color:#2aa198;font-weight:bold">1&lt;/span>, &lt;span style="color:#2aa198;font-weight:bold">14&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#2aa198;font-weight:bold">2&lt;/span>, &lt;span style="color:#2aa198;font-weight:bold">10&lt;/span>), (&lt;span style="color:#2aa198;font-weight:bold">2&lt;/span>, &lt;span style="color:#2aa198;font-weight:bold">11&lt;/span>), (&lt;span style="color:#2aa198;font-weight:bold">2&lt;/span>, &lt;span style="color:#2aa198;font-weight:bold">12&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#2aa198;font-weight:bold">3&lt;/span>, &lt;span style="color:#2aa198;font-weight:bold">13&lt;/span>), (&lt;span style="color:#2aa198;font-weight:bold">3&lt;/span>, &lt;span style="color:#2aa198;font-weight:bold">14&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#2aa198;font-weight:bold">4&lt;/span>, &lt;span style="color:#2aa198;font-weight:bold">13&lt;/span>), (&lt;span style="color:#2aa198;font-weight:bold">4&lt;/span>, &lt;span style="color:#2aa198;font-weight:bold">14&lt;/span>), (&lt;span style="color:#2aa198;font-weight:bold">4&lt;/span>, &lt;span style="color:#2aa198;font-weight:bold">10&lt;/span>), (&lt;span style="color:#2aa198;font-weight:bold">4&lt;/span>, &lt;span style="color:#2aa198;font-weight:bold">11&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>А вот собственно и запрос, интересуют пересечения с пользователем 2, самые большие сверху.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900">SELECT&lt;/span> &lt;span style="color:#268bd2">uid&lt;/span>, &lt;span style="color:#268bd2">array_agg&lt;/span>(&lt;span style="color:#268bd2">fid&lt;/span>) &lt;span style="color:#268bd2">followers_intersect&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900">FROM&lt;/span> &lt;span style="color:#268bd2">f&lt;/span> &lt;span style="color:#859900">GROUP&lt;/span> &lt;span style="color:#859900">BY&lt;/span> &lt;span style="color:#268bd2">uid&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900">ORDER&lt;/span> &lt;span style="color:#859900">BY&lt;/span> &lt;span style="color:#859900">cardinality&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#859900">SELECT&lt;/span> &lt;span style="color:#268bd2">array_agg&lt;/span>(&lt;span style="color:#268bd2">a1&lt;/span>) &lt;span style="color:#859900">FROM&lt;/span> &lt;span style="color:#859900">unnest&lt;/span>(&lt;span style="color:#268bd2">array_agg&lt;/span>(&lt;span style="color:#268bd2">fid&lt;/span>)) &lt;span style="color:#268bd2">a1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#859900">INNER&lt;/span> &lt;span style="color:#859900">JOIN&lt;/span> &lt;span style="color:#859900">unnest&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#859900">SELECT&lt;/span> &lt;span style="color:#268bd2">array_agg&lt;/span>(&lt;span style="color:#268bd2">fid&lt;/span>) &lt;span style="color:#859900">FROM&lt;/span> &lt;span style="color:#268bd2">f&lt;/span> &lt;span style="color:#859900">WHERE&lt;/span> &lt;span style="color:#268bd2">uid&lt;/span>=&lt;span style="color:#2aa198;font-weight:bold">2&lt;/span>)::&lt;span style="color:#cb4b16">INT&lt;/span>[]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ) &lt;span style="color:#268bd2">a2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#859900">ON&lt;/span> &lt;span style="color:#268bd2">a1&lt;/span>=&lt;span style="color:#268bd2">a2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )::&lt;span style="color:#cb4b16">INT&lt;/span>[]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>) &lt;span style="color:#859900">DESC&lt;/span> &lt;span style="color:#268bd2">NULLS&lt;/span> &lt;span style="color:#859900">LAST&lt;/span>;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Результат, как и ожидалось:&lt;/p></description></item></channel></rss>